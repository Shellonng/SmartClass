<template>
  <div class="ai-assistant-page">
    <div class="page-header">
      <h2>AIæ™ºèƒ½åŠ©æ‰‹</h2>
      <div class="header-actions">
        <a-button type="primary" @click="toggleChatbot">
          <RobotOutlined />
          {{ showChatbot ? 'éšè—' : 'æ˜¾ç¤º' }}åŠ©æ‰‹
        </a-button>
      </div>
    </div>

    <div class="content">
      <div class="assistant-info">
        <a-card title="æ™ºèƒ½åŠ©æ‰‹åŠŸèƒ½">
          <div class="feature-list">
            <div class="feature-item">
              <h4>ğŸ“ ä½œä¸šæ‰¹æ”¹</h4>
              <p>æä¾›æ™ºèƒ½æ‰¹æ”¹å»ºè®®ï¼Œè‡ªåŠ¨è¯„åˆ†å’Œè¯¦ç»†åé¦ˆ</p>
            </div>
            <div class="feature-item">
              <h4>ğŸ“Š è€ƒè¯•ç®¡ç†</h4>
              <p>ååŠ©åˆ›å»ºè¯•å·ã€ç®¡ç†è€ƒè¯•å’Œåˆ†æè€ƒè¯•ç»“æœ</p>
            </div>
            <div class="feature-item">
              <h4>ğŸ’¬ æ™ºèƒ½é—®ç­”</h4>
              <p>å›ç­”æ•™å­¦ç›¸å…³é—®é¢˜ï¼Œæä¾›æ•™å­¦å»ºè®®</p>
            </div>
            <div class="feature-item">
              <h4>ğŸ“ˆ æ•°æ®åˆ†æ</h4>
              <p>åˆ†æå­¦ç”Ÿæˆç»©å’Œå­¦ä¹ æƒ…å†µï¼Œç”ŸæˆæŠ¥å‘Š</p>
            </div>
          </div>
        </a-card>
      </div>

      <div class="usage-guide">
        <a-card title="ä½¿ç”¨æŒ‡å—">
          <div class="guide-steps">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>å¯åŠ¨åŠ©æ‰‹</h4>
                <p>ç‚¹å‡»å³ä¸‹è§’çš„èŠå¤©æŒ‰é’®å¯åŠ¨æ™ºèƒ½åŠ©æ‰‹</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>æå‡ºé—®é¢˜</h4>
                <p>åœ¨èŠå¤©çª—å£ä¸­è¾“å…¥æ‚¨çš„é—®é¢˜æˆ–éœ€æ±‚</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>è·å–å¸®åŠ©</h4>
                <p>AIåŠ©æ‰‹ä¼šæä¾›ä¸“ä¸šçš„å›ç­”å’Œå»ºè®®</p>
              </div>
            </div>
          </div>
        </a-card>
      </div>
    </div>

    <!-- æ™ºèƒ½ä½“èŠå¤©æœºå™¨äºº -->
    <DifyChatbot 
      v-if="showChatbot"
      :token="chatbotConfig.token"
      :baseUrl="chatbotConfig.baseUrl"
      :systemVariables="chatbotConfig.systemVariables"
      :userVariables="chatbotConfig.userVariables"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { RobotOutlined } from '@ant-design/icons-vue'
import DifyChatbot from '@/components/DifyChatbot.vue'

// æ™ºèƒ½ä½“èŠå¤©æœºå™¨äººé…ç½®
const showChatbot = ref(true)
const chatbotConfig = ref({
  token: 'SKiyotVrMpqPW2Sp',
  baseUrl: 'http://219.216.65.108',
  systemVariables: {
    context: 'ai_assistant',
    user_role: 'teacher'
  },
  userVariables: {
    page: 'ai_assistant'
  }
})

const toggleChatbot = () => {
  showChatbot.value = !showChatbot.value
}
</script>

<style scoped>
.ai-assistant-page {
  padding: 24px;
  background-color: #f5f7fa;
  min-height: 100vh;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.page-header h2 {
  margin: 0;
  font-size: 24px;
  font-weight: 600;
  color: #1f2937;
}

.header-actions {
  display: flex;
  gap: 12px;
}

.content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 24px;
}

.assistant-info .feature-list {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.feature-item {
  padding: 16px;
  background-color: #f8fafc;
  border-radius: 8px;
  border-left: 4px solid #1C64F2;
}

.feature-item h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.feature-item p {
  margin: 0;
  color: #6b7280;
  font-size: 14px;
}

.usage-guide .guide-steps {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.step {
  display: flex;
  align-items: flex-start;
  gap: 16px;
}

.step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background-color: #1C64F2;
  color: white;
  border-radius: 50%;
  font-weight: 600;
  font-size: 14px;
  flex-shrink: 0;
}

.step-content h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.step-content p {
  margin: 0;
  color: #6b7280;
  font-size: 14px;
}

@media (max-width: 768px) {
  .content {
    grid-template-columns: 1fr;
  }
  
  .assistant-info .feature-list {
    grid-template-columns: 1fr;
  }
}
</style> 