# 智能批改功能使用指南

## 功能概述

智能批改功能是基于AI技术的自动化作业评分系统，能够对学生提交的各类型作业进行智能评分和反馈。该功能支持单选题、多选题、判断题、填空题、简答题等多种题型的自动批改，大幅提高教师批改效率，同时为学生提供及时的学习反馈。

## 主要特性

1. **多题型支持**：支持单选题、多选题、判断题、填空题、简答题等多种题型的自动批改
2. **批量处理**：支持批量批改多名学生的作业提交
3. **详细反馈**：为每道题目提供评分和具体的评语反馈
4. **统计分析**：提供班级整体成绩分析，包括平均分、最高分、最低分、分数分布等
5. **学生反馈**：学生可以查看自己的作业批改结果和教师反馈

## 教师端使用指南

### 1. 单个作业批改

1. 进入教师端 -> 作业管理 -> 选择需要批改的作业
2. 点击"智能批改"按钮，系统会自动加载学生提交的答案
3. 设置批改标准（可选），如评分权重、评分标准等
4. 点击"开始批改"，系统会自动进行批改
5. 批改完成后，可以查看批改结果，并可以手动调整评分和反馈

### 2. 批量作业批改

1. 进入教师端 -> 作业管理 -> 选择需要批改的作业
2. 点击"批量批改"按钮，系统会显示所有未批改的学生提交
3. 设置批改标准（可选）
4. 点击"开始批量批改"，系统会自动对所有选中的提交进行批改
5. 批改完成后，可以查看批量批改结果，并可以对单个提交进行手动调整

### 3. 查看批改统计

1. 进入教师端 -> 作业管理 -> 选择已批改的作业
2. 点击"批改统计"按钮，查看该作业的批改统计信息
3. 统计信息包括：
   - 总提交数/已批改数
   - 平均分/最高分/最低分
   - 分数分布图表
   - 常见错误分析
   - 知识点掌握程度分析

### 4. 批改标准设置

1. 进入教师端 -> 作业管理 -> 选择作业 -> 批改设置
2. 设置评分标准，例如：
   ```
   评分标准：
   1. 答案准确性 (60%)
   2. 解题步骤 (30%)
   3. 表述清晰度 (10%)
   ```
3. 保存批改标准，系统会在后续批改中应用该标准

## 学生端使用指南

### 1. 查看批改结果

1. 进入学生端 -> 我的作业 -> 已完成作业
2. 点击已批改的作业，查看批改结果
3. 批改结果包括：
   - 总分和得分
   - 每道题的得分和评语
   - 教师的整体评价反馈

### 2. 查看批改统计

1. 进入学生端 -> 我的作业 -> 学习统计
2. 查看个人作业完成情况和成绩统计
3. 统计信息包括：
   - 已完成/未完成/已批改作业数量
   - 平均得分率
   - 分数分布
   - 知识点掌握程度分析

## API接口说明

### 教师端接口

#### 1. 单个作业批改

```
POST /api/teacher/grading/single
```

请求参数：
```json
{
  "submissionId": 123,
  "assignmentId": 456,
  "studentAnswers": [
    {
      "questionId": 1,
      "studentAnswer": "A"
    },
    {
      "questionId": 2,
      "studentAnswer": "这是学生的简答题答案..."
    }
  ],
  "questions": [
    {
      "questionId": 1,
      "questionText": "这是一道单选题...",
      "questionType": "single",
      "correctAnswer": "A",
      "totalScore": 5
    },
    {
      "questionId": 2,
      "questionText": "这是一道简答题...",
      "questionType": "short",
      "correctAnswer": "标准答案...",
      "totalScore": 10
    }
  ],
  "gradingCriteria": "评分标准：\n1. 答案准确性 (60%)\n2. 解题步骤 (30%)\n3. 表述清晰度 (10%)",
  "maxScore": 100
}
```

响应：
```json
{
  "code": 200,
  "message": "智能批改完成",
  "data": {
    "submissionId": 123,
    "assignmentId": 456,
    "status": "completed",
    "earnedScore": 85,
    "maxScore": 100,
    "overallComment": "整体表现良好，但在第二题中解题步骤不够清晰...",
    "results": [
      {
        "questionId": 1,
        "isCorrect": true,
        "score": 5,
        "maxScore": 5,
        "comment": "答案正确"
      },
      {
        "questionId": 2,
        "isCorrect": false,
        "score": 8,
        "maxScore": 10,
        "comment": "答案基本正确，但解题步骤不够清晰，缺少关键推导过程..."
      }
    ]
  }
}
```

#### 2. 批量作业批改

```
POST /api/teacher/grading/batch
```

请求参数：
```json
{
  "assignmentId": 456,
  "submissions": [
    {
      "submissionId": 123,
      "assignmentId": 456,
      "studentId": 789,
      "studentAnswers": [...],
      "questions": [...],
      "maxScore": 100
    },
    {
      "submissionId": 124,
      "assignmentId": 456,
      "studentId": 790,
      "studentAnswers": [...],
      "questions": [...],
      "maxScore": 100
    }
  ],
  "gradingCriteria": "评分标准：\n1. 答案准确性 (60%)\n2. 解题步骤 (30%)\n3. 表述清晰度 (10%)"
}
```

响应：
```json
{
  "code": 200,
  "message": "批量智能批改完成",
  "data": [
    {
      "submissionId": 123,
      "status": "completed",
      "earnedScore": 85,
      "maxScore": 100,
      "overallComment": "...",
      "results": [...]
    },
    {
      "submissionId": 124,
      "status": "completed",
      "earnedScore": 92,
      "maxScore": 100,
      "overallComment": "...",
      "results": [...]
    }
  ]
}
```

#### 3. 获取批改统计

```
GET /api/teacher/grading/statistics/{assignmentId}
```

响应：
```json
{
  "code": 200,
  "message": "批改统计获取成功",
  "data": {
    "assignmentId": 456,
    "totalSubmissions": 30,
    "gradedSubmissions": 28,
    "averageScore": 78.5,
    "highestScore": 95.0,
    "lowestScore": 45.0,
    "scoreDistribution": {
      "90-100": 5,
      "80-89": 10,
      "70-79": 8,
      "60-69": 3,
      "0-59": 2
    }
  }
}
```

### 学生端接口

#### 1. 获取批改结果

```
GET /api/student/assignments/submissions/{submissionId}/results
```

响应：
```json
{
  "code": 200,
  "message": "获取批改结果成功",
  "data": {
    "submissionId": 123,
    "assignmentId": 456,
    "assignmentTitle": "第一章测验",
    "status": 2,
    "score": 85,
    "totalScore": 100,
    "feedback": "整体表现良好，但在第二题中解题步骤不够清晰...",
    "submitTime": "2025-07-10T15:30:00",
    "gradeTime": "2025-07-11T10:15:00",
    "correctRate": 75.0,
    "answers": [
      {
        "questionId": 1,
        "questionTitle": "这是一道单选题...",
        "questionType": "single",
        "correctAnswer": "A",
        "studentAnswer": "A",
        "isCorrect": true,
        "score": 5,
        "comment": "答案正确"
      },
      {
        "questionId": 2,
        "questionTitle": "这是一道简答题...",
        "questionType": "short",
        "correctAnswer": "标准答案...",
        "studentAnswer": "学生答案...",
        "isCorrect": false,
        "score": 8,
        "comment": "答案基本正确，但解题步骤不够清晰，缺少关键推导过程..."
      }
    ]
  }
}
```

#### 2. 获取已批改作业列表

```
GET /api/student/assignments/graded
```

响应：
```json
{
  "code": 200,
  "message": "获取已批改作业成功",
  "data": [
    {
      "submissionId": 123,
      "assignmentId": 456,
      "title": "第一章测验",
      "courseId": 789,
      "type": "homework",
      "score": 85,
      "totalScore": 100,
      "submitTime": "2025-07-10T15:30:00",
      "gradeTime": "2025-07-11T10:15:00",
      "scoreRate": 85.0
    },
    {
      "submissionId": 124,
      "assignmentId": 457,
      "title": "第二章测验",
      "courseId": 789,
      "type": "homework",
      "score": 92,
      "totalScore": 100,
      "submitTime": "2025-07-15T16:45:00",
      "gradeTime": "2025-07-16T09:30:00",
      "scoreRate": 92.0
    }
  ]
}
```

## 智能批改算法说明

本系统使用基于大语言模型的智能批改算法，能够对各类题型进行智能评分：

1. **客观题批改**：对于单选题、多选题、判断题和填空题等客观题，系统会直接比对学生答案与标准答案，给出评分。

2. **主观题批改**：对于简答题、论述题等主观题，系统会：
   - 分析学生答案与标准答案的语义相似度
   - 检查关键概念和知识点的覆盖程度
   - 评估答案的逻辑性和完整性
   - 根据批改标准给出评分和详细反馈

3. **代码题批改**：对于编程题，系统会：
   - 分析代码的语法正确性
   - 评估代码的功能实现是否符合要求
   - 检查代码的效率和质量
   - 给出评分和改进建议

## 注意事项

1. 智能批改系统适用于大部分标准化题目，但对于高度创新性或开放性的题目，可能需要教师进行人工审核和调整。

2. 教师可以在智能批改后对评分和反馈进行手动调整，以确保批改结果的准确性和公平性。

3. 系统会自动保存所有批改结果，方便后续查询和分析。

4. 学生可以通过系统查看自己的批改结果和反馈，但不能修改已提交的答案。

## 常见问题

**Q: 智能批改系统能否处理手写答案？**

A: 目前系统主要支持电子文本形式的答案批改。对于手写答案，需要先进行OCR识别转换为文本后才能进行智能批改。

**Q: 批改标准如何设置才能获得最佳效果？**

A: 建议设置清晰、具体的批改标准，包括评分权重、关键知识点要求等。系统会根据这些标准进行智能评分。

**Q: 如何处理智能批改与人工批改的分歧？**

A: 教师可以在系统中手动调整智能批改的结果。建议对于复杂或重要的题目，教师进行抽查和审核，确保批改质量。 